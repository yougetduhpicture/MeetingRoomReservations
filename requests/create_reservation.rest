### ===========================================
### CREATE RESERVATION REQUESTS
### ===========================================
### IMPORTANT: First run a login request from login.rest
### and copy the token to the @token variable below
### ===========================================
###
### NEW FEATURES:
### - Flexible booking durations (30 min to 12 hours)
### - Any start/end time in HH:MM format (not just hourly)
### - Midnight-spanning bookings (e.g., 23:00-02:00)
### - endDate is calculated automatically
### ===========================================

@baseUrl = http://localhost:3000/api

### PASTE YOUR TOKEN HERE (get it from login.rest response)
@aliceToken = YOUR_ALICE_TOKEN_HERE
@bobToken = YOUR_BOB_TOKEN_HERE

### -----------------------------------------
### Create a valid reservation (should succeed - 201)
### -----------------------------------------
### Creates a 1-hour reservation for Conference Room A

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-1",
  "startDate": "2026-06-10",
  "startTime": "09:00",
  "endTime": "10:00"
}

### -----------------------------------------
### Create reservation with flexible duration (should succeed - 201)
### -----------------------------------------
### 2.5 hour meeting

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-2",
  "startDate": "2026-06-10",
  "startTime": "14:00",
  "endTime": "16:30"
}

### -----------------------------------------
### Create reservation with non-hourly times (should succeed - 201)
### -----------------------------------------
### Meeting from 14:15 to 16:45

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{bobToken}}

{
  "roomId": "room-3",
  "startDate": "2026-06-11",
  "startTime": "14:15",
  "endTime": "16:45"
}

### -----------------------------------------
### Create midnight-spanning reservation (should succeed - 201)
### -----------------------------------------
### Late night meeting from 23:00 to 02:00 (spans midnight)
### Note: endDate will be automatically set to 2026-06-13

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-1",
  "startDate": "2026-06-12",
  "startTime": "23:00",
  "endTime": "02:00"
}

### -----------------------------------------
### Create minimum duration reservation (should succeed - 201)
### -----------------------------------------
### Quick 30-minute meeting (minimum allowed)

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-2",
  "startDate": "2026-06-13",
  "startTime": "10:00",
  "endTime": "10:30"
}

### -----------------------------------------
### Create reservation without token (should fail - 401)
### -----------------------------------------

POST {{baseUrl}}/reservations
Content-Type: application/json

{
  "roomId": "room-1",
  "startDate": "2026-06-15",
  "startTime": "10:00",
  "endTime": "11:00"
}

### -----------------------------------------
### Create reservation with invalid token (should fail - 401)
### -----------------------------------------

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer invalid-token-here

{
  "roomId": "room-1",
  "startDate": "2026-06-15",
  "startTime": "10:00",
  "endTime": "11:00"
}

### -----------------------------------------
### Create reservation with past date (should fail - 400)
### -----------------------------------------

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-1",
  "startDate": "2020-01-15",
  "startTime": "10:00",
  "endTime": "11:00"
}

### -----------------------------------------
### Create reservation too short (should fail - 400)
### -----------------------------------------
### Duration must be at least 30 minutes

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-1",
  "startDate": "2026-06-15",
  "startTime": "09:00",
  "endTime": "09:15"
}

### -----------------------------------------
### Create reservation too long (should fail - 400)
### -----------------------------------------
### Duration cannot exceed 12 hours

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-1",
  "startDate": "2026-06-15",
  "startTime": "08:00",
  "endTime": "21:00"
}

### -----------------------------------------
### Create reservation for non-existent room (should fail - 404)
### -----------------------------------------

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-999",
  "startDate": "2026-06-15",
  "startTime": "10:00",
  "endTime": "11:00"
}

### -----------------------------------------
### Create reservation with invalid time format (should fail - 400)
### -----------------------------------------

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-1",
  "startDate": "2026-06-15",
  "startTime": "9:00",
  "endTime": "10:00"
}

### -----------------------------------------
### Create reservation with missing fields (should fail - 400)
### -----------------------------------------

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-1",
  "startDate": "2026-06-15"
}

### -----------------------------------------
### Create reservation with same start and end time (should fail - 400)
### -----------------------------------------

POST {{baseUrl}}/reservations
Content-Type: application/json
Authorization: Bearer {{aliceToken}}

{
  "roomId": "room-1",
  "startDate": "2026-06-15",
  "startTime": "10:00",
  "endTime": "10:00"
}
